server:
  port: 8867
  #让gateway支持https请求(此外还要将生成的https证书放进gateway项目的类路径下且自定义GlobalFilter将https转成http后再转发到各个微服务中)
  #ssl:
    #key-alias: spring
    #enabled: true
    #key-password: spring
    #key-store: classpath:selfsigned.jks
    #key-store-type: JKS
    #key-store-provider: SUN
    #key-store-password: spring

spring:
  application:
    name: gateway-server
  cloud:
    #连接到配置中心
    config:
      discovery:
        enabled: true
        service-id: config-server
      #username: config
      #password: 123456
      label: master
      name: cn-gateway
      profile: dev
  #bus:
     #trace:
        #enabled: true
    #网关路由配置
    gateway:
       discovery:
          locator:
            #是否与服务发现组件进行结合，从而可以通过serverId转发到具体实例（默认false）
            enabled: true
            #当注册中心是eureka时设置为true表示开启用小写的serverId进行基于服务的路由转发
            lowerCaseServiceId: true
  #routes: #routes的信息不用配置也行，直接访问各个微服务的小写serverId即可
      #- id: order-service
        #uri: http://localhost:8764
        #predicates:
        #- Path=/order/**
      #- id: user-service
        #uri: http://localhost:8762
        #predicates:
        #- Path=/user/**
      #- id: biz-service
        #uri: http://localhost:8763
        #predicates:
        #- Path=/biz/**

#注册到eureka
eureka:
   #instance:
      #prefer-ip-address: true
   client:
      #securePortEnabled: true
      #ssl:
         #key-store: client.p12
         #key-store-password: client
      serviceUrl:
         defaultZone: http://root:123456@localhost:8861/eureka/

security:
  basic:
    enabled: false
    
logging: ## Spring Cloud Gateway的日志配置
  level:
    org.springframework.cloud.gateway: TRACE
    org.springframework.http.server.reactive: DEBUG
    org.springframework.web.reactive: DEBUG
    reactor.ipc.netty: DEBUG

#spring gateway提供了一个gateway actuator，该EndPoint提供了关于Filter和Routes的信息查询及指定route信息更新的rest api接口(http://localhost:8867/actuator/gateway/routes)，这里开启
management:
   endpoints:
      web:
         exposure:
            #表示包含所有端点的信息(默认只打开info、Heath的端点)
            include: '*'
   #endpoint:
      #health:
         #总是表示详细信息显示
         #show-details: always
   security:
      enabled: falsee
